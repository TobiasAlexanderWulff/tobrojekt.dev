---
import Base from "~/layouts/Base.astro";
import { getDictionary, resolveLocale } from "~/lib/i18n";

const locale = resolveLocale(Astro.currentLocale);
const dictionary = getDictionary(locale);
const pageTitle = `${dictionary.search.heading} â€“ ${dictionary.site.name}`;
---
<Base title={pageTitle} description={dictionary.search.metaDescription}>
  <section class="container py-10">
    <h1 class="text-3xl font-bold mb-6">{dictionary.search.heading}</h1>
    <div id="search"></div>
  </section>
  <link href="/pagefind/pagefind-ui.css" rel="stylesheet" />
  <script defer src="/pagefind/pagefind-ui.js"></script>
  <script>
    // Initialize Pagefind UI if assets are available (present after build)
    window.addEventListener('DOMContentLoaded', () => {
      if (window.PagefindUI) {
        new window.PagefindUI({ element: '#search', showSubResults: true });
      }
    });
  </script>
</Base>
